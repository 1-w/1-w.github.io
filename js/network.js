$(function(){function c(){k=b.clientWidth/canvas.width,h=b.clientHeight/canvas.height,canvas=createHiDPICanvas(b.clientWidth,b.clientHeight),W(k,h),$(".lineTop").css("top",.5*(1/LayerSize.length)*canvas.height),$(".lineBot").css("top",(LayerSize.length-.5)*(1/LayerSize.length)*canvas.height)}function x(){for(u=0,i=0;i<o.length;i++)u+=o[i].length;tmp=Y(1,100),tmp<Math.max(8,u/10)&&(layerID=Y(1,LayerSize.length-1)-1,q.push(new M(layerID,layerID+1,Y(1,LayerSize[layerID])-1,Y(0,o[layerID+1].length-1)))),P(),Q(),R(),C(),ctx.clearRect(0,0,canvas.width,canvas.height),S(),T(),U(),A(),V(),setTimeout(function(){requestAnimationFrame(x)},1e3/e)}function y(a){neuron1=new E(a.clientX,a.clientY,1),m.push(neuron1),z(a),B()}function z(a){for(m[0].x=a.clientX,m[0].y=a.clientY,i=1;i<v-2;i++){if(m[0].y<w*i)return m[0].layer=i,void(s!=m[0].layer&&(s=$.extend({},m[0].layer),t=!0));m[0].layer=v-2,s!=m[0].layer&&(s=$.extend({},m[0].layer),t=!0)}}function A(){0!=m.length&&G(m[0],"#F00")}function B(){for(currLayer=m[0].layer,j=0;j<o[currLayer-1].length;j++)synapseIn=new H(currLayer-1,j,0),n.push(synapseIn);for(l=0;l<o[currLayer+1].length;l++)synapseOut=new H(currLayer+1,l,0),n.push(synapseOut)}function C(){if(n.length>0)for(t&&(n.splice(0,1e3),B(),t=!1),i=0;i<n.length;i++)L=Math.max(canvas.width,canvas.height),dist=X(o[n[i].layerID][n[i].startID],m[0]),dist>.2*L?thick=0:dist<.02*L?thick=3:thick=Math.sqrt(.2*L/Math.max(.02*L,dist)-1),n[i].thickness=thick}function D(a,b){0!=a.thickness&&(ctx.lineWidth=a.thickness,ctx.beginPath(),ctx.moveTo(o[a.layerID][a.startID].x,o[a.layerID][a.startID].y),ctx.lineTo(m[0].x,m[0].y),ctx.strokeStyle=b,ctx.stroke())}function E(a,b,c){this.x=a,this.y=b,this.goalX=0,this.goalY=0,this.connections=0,this.layer=0,this.moving=!0}function F(a){a.moving&&((0==a.goalX||Math.abs(a.goalX-a.x)<.1)&&(a.goalX=Y(a.x-.05*canvas.width,a.x+.05*canvas.width),a.goalY=Y(a.y-.05*canvas.height,a.y+.05*canvas.height)),a.x<.1&&(a.goalX=Y(5,15)/100*canvas.width),a.x>canvas.width-.1&&(a.goalX=Y(85,95)/100*canvas.width),a.y<.1&&(a.goalY=Y(5,15)/100*canvas.height),a.y>canvas.height-.1&&(a.goalY=Y(85,95)/100*canvas.height),direction_x=a.goalX-a.x,direction_y=a.goalY-a.y,a.x=a.x+.01*direction_x,a.y=a.y+.01*direction_y)}function G(a,b){ctx.fillStyle=b,ctx.strokeStyle=b,ctx.lineWidth=.1,ctx.beginPath(),ctx.arc(a.x,a.y,.1,0,2*Math.PI,!1),ctx.closePath(),ctx.fill(),ctx.stroke()}function H(a,b,c){this.layerID=a,this.startID=b,this.endID=c,this.thickness=1}function I(a,b){0!=a.thickness&&(ctx.lineWidth=a.thickness,ctx.beginPath(),ctx.moveTo(o[a.layerID][a.startID].x,o[a.layerID][a.startID].y),ctx.lineTo(o[a.layerID+1][a.endID].x,o[a.layerID+1][a.endID].y),ctx.strokeStyle=b,ctx.stroke())}function J(){p=[];for(var a=0;a<o.length-1;a++)for(var b=0;b<o[a].length;b++)for(var c=0;c<o[a+1].length;c++)synapse1=new H(a,b,c),p.push(synapse1)}function K(a){L=Math.max(canvas.width,canvas.height),dist=X(o[a.layerID][a.startID],o[a.layerID+1][a.endID]),dist>.2*L?thick=0:dist<.02*L?thick=3:thick=Math.sqrt(.2*L/Math.max(.02*L,dist)-1),a.thickness=thick}function M(a,b,c,d){this.startLayer=a,this.destLayer=b,this.startID=c,this.endID=d,this.percent=0,this.speed=Y(1e3,1001)/5,this.delay=Y(1,5),this.started=!1,this.arrived=!1,this.thickness=.1,this.alpha=.9}function N(a){if(L=Math.max(canvas.width,canvas.height),dist=X(o[a.startLayer][a.startID],o[a.destLayer][a.endID]),dist>.2*L?thick=0:dist<.02*L?thick=3:thick=Math.sqrt(.2*L/Math.max(.02*L,dist)-1),a.thickness=thick,0!=a.thickness){if(a.delay>.01)return void(a.delay-=1/e);if(a.started=!0,a.percent>=100)return void(a.arrived=!0);a.percent+=(2+a.speed-a.percent/100*(a.percent/100)*(a.percent/100)*(a.percent/100)*a.speed)/e,a.alpha=.95-a.percent*a.percent*a.percent*a.percent*a.percent*a.percent/1e12}}function O(a){0!=a.thickness&&(dx=a.percent/100*(o[a.destLayer][a.endID].x-o[a.startLayer][a.startID].x),dy=a.percent/100*(o[a.destLayer][a.endID].y-o[a.startLayer][a.startID].y),color="rgba(255,255,255, "+a.alpha+")",ctx.fillStyle=color,ctx.strokeStyle=color,ctx.lineWidth=a.thickness/4,ctx.beginPath(),ctx.arc(o[a.startLayer][a.startID].x+dx,o[a.startLayer][a.startID].y+dy,a.thickness/4,0,2*Math.PI,!1),ctx.closePath(),ctx.fill(),ctx.stroke())}function P(){for(var a=0;a<o.length;a++)for(var b=0;b<o[a].length;b++)F(o[a][b])}function Q(){for(var a=0;a<p.length;a++)K(p[a])}function R(){for(var a=q.length-1;a>=0;a--)N(q[a]),0==q[a].thickness?q.splice(a,1):q[a].arrived&&(q[a].destLayer==v-1?q.splice(a,1):(tmp=Y(1,10),tmp<10||1==q[a].destLayer?tmp=1:tmp=-1,signal1=$.extend(!0,{},new M(q[a].destLayer,q[a].destLayer+tmp,q[a].endID,Y(0,o[Math.max(1,q[a].destLayer+tmp)].length-1))),q.splice(a,1,signal1)))}function S(){for(var a=0;a<o.length;a++)for(var b=0;b<o[a].length;b++)G(o[a][b],"#6FCF00")}function T(){for(var a=0;a<p.length;a++)I(p[a],"#6FCF00")}function U(){for(var a=q.length-1;a>=0;a--)q[a].started&&0!=q[a].thickness&&O(q[a])}function V(){if(n.length>0)for(var a=0;a<n.length;a++)D(n[a],"#F00")}function W(a,b){for(var c=0;c<o.length;c++)for(var d=0;d<o[c].length;d++)o[c][d].x=o[c][d].x*a,o[c][d].y=o[c][d].y*b,o[c][d].goalX=0,o[c][d].goalY=0}function X(a,b){return dx=b.x-a.x,dy=b.y-a.y,dist=Math.sqrt(dx*dx+dy*dy),dist}function Y(a,b){return Math.floor(Math.random()*(b-a+1)+a)}function Z(a){a.style.width="100%",a.style.height="100%",a.width=a.offsetWidth,a.height=a.offsetHeight}$("#typed").typed({strings:["$ ^700Hi,^1400 I^100'm^200 Lennart^20 Walger^200."],typeSpeed:30,callback:function(){var a=document.getElementsByClassName("typed-cursor")[0];setTimeout(function(){a.remove()},2e3),window.setTimeout(function(){$("#typed2").typed({strings:["$ ^700I'm^100 an^100 engineer."],typeSpeed:30,startDelay:0})},2e3)}});var a=function(){var a=document.getElementById("canvas").getContext("2d"),b=window.devicePixelRatio||1,c=a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1;return b/c}();createHiDPICanvas=function(b,c,d){d||(d=a);var e=document.getElementById("canvas");return e.width=b*d,e.height=c*d,e.style.width=b+"px",e.style.height=c+"px",e.getContext("2d").setTransform(d,0,0,d,0,0),e},canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d"),ctx.translate(.5,.5),ctx.globalAlpha=.3;var b=document.getElementById("container");addEvent(window,"resize",function(a){c()});var d=!0,e=60,h=b.clientHeight/canvas.height,k=b.clientWidth/canvas.width;canvas.onmousein=function(a){y(a)},canvas.onmousemove=function(a){0==m.length?y(a):z(a)},canvas.onmouseout=function(a){m.splice(0,1),n.splice(0,1e3)},canvas.onmouseup=function(a){prevNeuron=$.extend(!0,{},m[0]),prevNeuron.goalX=prevNeuron.x+.17,prevNeuron.goalY=prevNeuron.y+.17,prevNeuron.moving=d,o[prevNeuron.layer].push(prevNeuron),J()},ctx.imageSmoothingEnabled=!0,Z(canvas);var m=[],n=[],o=[[],[],[],[],[],[]],p=[],q=[],s=0,t=!0,u=0;LayerSize=[3,30,30,30,30,3];var v=o.length,w=canvas.height/(v-2);for(j=0;j<LayerSize.length;j++)for(i=0;i<LayerSize[j];i++)neuron1=$.extend(!0,{},new E(Y(1,LayerSize[j])*(1/LayerSize[j])*canvas.width,(j+.5)*(1/LayerSize.length)*canvas.height,j)),neuron1.moving=d,o[j].push(neuron1);for(i=0;i<LayerSize[0];i++)o[0][i].moving=!1,o[0][i].x=-100+canvas.width/2+(i+1)*(1/(LayerSize[0]+1))*200,console.log((i+1)*(1/(LayerSize[0]+1))*canvas.width);for(i=0;i<LayerSize[LayerSize.length-1];i++)o[LayerSize.length-1][i].moving=!1,o[LayerSize.length-1][i].x=-100+canvas.width/2+(i+1)*(1/(LayerSize[LayerSize.length-1]+1))*30;J(),c(),x()});var addEvent=function(a,b,c){null!=a&&"undefined"!=typeof a&&(a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c)};